#!/bin/bash

#テキストファイルから区切り文字を指定してカラムを取り出す
#設定されている環境変数のリストを取得し、ある変数が定義されているかどうかを確認したい

#事前設定をしておかないとエラーになる環境変数の定義

envname="TMPVAR"

#envコマンドで環境変数一覧を表示し、cutコマンドで
# * 1番目の値を表示[-f 1]
# *  区切り文字記号は: [-d "="]
#として表示する

env | cut -f 1 -d "=" > env.lst

#チェックする環境変数名がenv.lstにマッチするかで未定義かどうか確認する
grep -q "^${envname}$" env.lst

#$?は終了ステータス0なら正常終了

if [ $? -eq 0 ]; then
	
	#環境変数が定義されていればstart.shを実行
	echo "環境変数$envnameは設定されています"
	./no003

else
	echo "環境変数$envnameが設定されていません"
fi
