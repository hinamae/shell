#!/bin/bash

#指定されたテキストだいるの行ごとにMD5のハッシュ値を計算しそのハッシュ値をカンマ区切りのcsv形式で出力する

#ハッシュ値を出力する一時ファイルを初期化する
tmpfile="hash.txt"

#:（ヌルコマンド）によって初期化する
: > $tmpfile

#シェルの区切り文字を改行のみとする
IFS='
'

#指定されたテキストファイルから一行ずつ読み込む

while read -r line
do
	#各行のMD5ハッシュを取得する
	#md5=ハッシュ値（メッセージダイジェスト、入力値に対してハッシュ関数による演算を行って出力される値）を取得する
	#コマンドの後ろにはファイルがつくため、1カラム目を取り出す
	echo -n "$line" | md5 | awk '{print $1}' >> $tmpfile

done < $1

#元のテキストファイルをハッシュ値を出力した一時ファイルをカンマ区切りで連結して表示する

paste -d "$1" $tmpfile
